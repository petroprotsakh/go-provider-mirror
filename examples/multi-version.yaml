# Multi-version manifest example
# Demonstrates multiple version constraints, multiple provider blocks,
# and per-provider engine overrides

defaults:
  engines:
    - terraform
    - opentofu
  platforms:
    - linux_amd64
    - darwin_arm64

providers:
  # Multiple version constraints for the same provider
  # Each constraint resolves independently to its latest matching version
  - source: hashicorp/random
    versions:
      - "~> 3.5.0"   # Latest 3.5.x (e.g., 3.5.1)
      - "~> 3.6.0"   # Latest 3.6.x (e.g., 3.6.3)

  # Multiple provider blocks for the same provider
  # Useful when different versions need different platforms
  - source: hashicorp/null
    versions: ["~> 3.2"]
    platforms:
      - linux_amd64
      - darwin_arm64

  - source: hashicorp/null
    versions: ["3.1.0"]  # Legacy version, only linux needed
    platforms:
      - linux_amd64

  # Per-provider engine override
  # This provider is only needed for Terraform, not OpenTofu
  - source: hashicorp/time
    versions: ["0.12.0"]
    engines: [terraform]
